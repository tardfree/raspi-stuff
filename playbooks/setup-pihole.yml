---
# Pihole on a real pi

# Pre-reqs:
# * Out of box, raspios (raspbian) pi WITH SSH enabled

# Initial ansible connection test:
# ansible pi -m setup -e "ansible_password=raspberry ansible_user=pi" -e \
# "ansible_ssh_common_args='-o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null'"

# Provision a pihole:
# ansible-playbook setup-pihole.yml --limit=<hostpattern>

# Qemu ssh:
# ssh -p 5022 pi@localhost -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null

- hosts: pi
  remote_user: pi
  become: yes
  vars:
    ansible_password: raspberry #this is the initial password only, and gets changed

#  pre_tasks:

  tasks:
    - import_role:
        name: pi-basic

    - import_role:
        name: pi-rtc

    - import_role:
        name: pi-pihole
